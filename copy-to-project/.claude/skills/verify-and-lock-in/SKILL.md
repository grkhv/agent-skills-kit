---
name: verify-and-lock-in
description: После правок — обязательная проверка и фиксация результата.
---

После любых правок кода ты ОБЯЗАН выполнить фиксацию результата.

## Порядок действий

### 1. Классифицировать изменения

- Исправление бага
- Изменение поведения
- Рефакторинг
- Обновление зависимостей
- Только документация

### 2. Проверки

- Запусти верификацию (предпочтительно `make check`)
- Если Makefile нет — используй стандарт проекта (pytest, ruff, mypy и т.д.)
- Не заявляй о проверках, если они реально не запускались

### 3. Фиксация (lock-in summary)

**ОБЯЗАТЕЛЬНО** создай файл `docs/notes/lock-in-YYYYMMDD-HHmm-<topic>.md`:

```markdown
# Lock-in: <краткое описание>

**Дата**: YYYY-MM-DD HH:mm
**Агент**: Claude Code / Codex / Windsurf / Antigravity

## Что изменилось
- <файл>: <что изменено> (3–8 пунктов)

## Как проверено
```bash
<точные команды>
# Результат: <OK/FAIL/выборочный вывод>
```

## Добавленные/изменённые тесты
- <пути к тестам>

## Обновлённые документы/ADR
- <пути>

## Остаточные риски / follow-up
- (если есть)
```

Также выведи краткую версию в чат для немедленной видимости.

## Ограничения

- Skill НЕ составляет тест-план (см. [`qa-gatekeeper`](../qa-gatekeeper/SKILL.md))
- Skill НЕ проектирует архитектуру
- Отсутствие проверки = стоп работы, а не "продолжим позже"
