---
name: project-architect-bootstrap
description: Проектирование каркаса и структуры для новых Python-проектов и крупных модулей (скрипты, пайплайны, боты). Использовать, когда нужно предложить архитектуру репозитория, базовую инфраструктуру (конфиг, логирование, типизация, тестовый каркас, CI-команды) и безопасно создать стартовый скелет без бизнес-логики.
---

# Project Architect Bootstrap

## Обзор

Собирай требования и предлагай два варианта структуры (минимальный и масштабируемый). При согласии — создавай только каркас/инфраструктуру, без бизнес-логики.

## Рабочий процесс

1) Провести короткое интервью (по одному вопросу за раз).
2) Сформировать два архитектурных варианта с trade-offs.
3) Дождаться выбора пользователя.
4) Если выбран масштабируемый — применять рекомендованный шаблон.
5) Если требуется изменить много файлов — сначала показать план и список файлов.
6) Проверять наличие существующих файлов и аккуратно дополнять; не ломать текущую структуру без согласия.

## Интервью (вопросы)

Задавай по одному вопросу. Группируй по логике:

**Цель и функциональность**
- Какова цель проекта/модуля в 1–2 предложениях?
- Какие входы и выходы (файлы, API, события)?

**Запуск и частота**
- Как часто запускается (ручной, по расписанию, постоянно)?
- Нужен ли режим демона/воркера?

**Окружение**
- Где запускается: Windows, WSL, Linux, контейнер?
- Есть ли ограничения окружения (без сети/без диска/без прав)?

**Зависимости**
- Нужны ли БД, очереди, внешние API, файловые хранилища?
- Какие протоколы/форматы (HTTP, S3, gRPC, Kafka, CSV)?

**Надёжность**
- Требования к отказоустойчивости и повторам?
- Нужны ли ретраи, идемпотентность, дедупликация?

## Архитектурные варианты

### Вариант A: Минимальный (быстрый старт)

Подходит для одноразовых скриптов и узких задач.

**Структура (пример):**

```
project/
  src/
    <package>/
      __init__.py
      main.py
  tests/
    test_smoke.py
  pyproject.toml
  README.md
```

**Trade-offs:**
- Плюс: быстро стартовать и понять.
- Минус: сложнее масштабировать и разделять ответственность.

### Вариант B: Масштабируемый (рекомендуемый)

Подходит для долгоживущих проектов, пайплайнов, ботов, сервисов.

**Структура (пример):**

```
project/
  src/
    <package>/
      __init__.py
      core/
        __init__.py
        config.py
        logging.py
      adapters/
        __init__.py
      services/
        __init__.py
      cli/
        __init__.py
        main.py
  tests/
    unit/
    integration/
  docs/
    runbook.md
  pyproject.toml
  .env.example
  README.md
  Makefile
```

**Trade-offs:**
- Плюс: масштабируемость, ясная архитектура, удобство сопровождения.
- Минус: больше файлов и стартовой настройки.

## Шаблон масштабируемого варианта (что создавать)

Создавай только каркас, без бизнес-логики.

**Каталоги**
- `src/<package>/core`: конфиг, логирование, общие типы/интерфейсы
- `src/<package>/adapters`: внешние интеграции (пустой каркас)
- `src/<package>/services`: прикладные сервисы (пустой каркас)
- `src/<package>/cli`: входные точки
- `tests/unit`, `tests/integration`
- `docs/runbook.md`

**Файлы и их содержание (минимум)**
- `pyproject.toml`: инструменты линтинга/типизации/тестов
- `README.md`: краткий запуск и ссылки
- `.env.example`: перечень переменных окружения
- `Makefile` или `justfile`: команды `lint`, `type`, `test`, `run`
- `core/config.py`: явная загрузка конфигурации
- `core/logging.py`: базовая настройка логирования

## Ограничения и стиль

- Всё по-русски, UTF-8.
- Строгая типизация и понятные имена.
- Без “магии”: явные зависимости, явные интерфейсы.
- Никакой бизнес-логики — только каркас/инфраструктура.
